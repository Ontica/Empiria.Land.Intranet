<emp-ng-spinner #spinner [visible]="isLoadingTransaction"></emp-ng-spinner>

<div class="explorer">

  <div class="primary"
       [fxHide]="displayFileViewer"
       [fxHide.lt-lg]="displayTransactionTabbedView || displayFileViewer || secondaryEditorDisplayed">

    <emp-land-transaction-list
        [transactionList]="transactionList"
        [selectedTransaction]="selectedTransaction"
        [filter]="filter"
        [title]="currentView?.title"
        [isLoading]="isLoading"
        (transactionListEvent)="onTransactionListEvent($event)">
    </emp-land-transaction-list>

  </div>


  <div *ngIf="displayFileViewer"
    class="primary-resizable"
    [fxHide.lt-lg]="secondaryEditorDisplayed"
    [ngClass.lt-lg]="'primary-resizable-disable'"
    empNgResizable>

    <emp-land-file-viewer
      [fileViewerData]="selectedFileViewerData"
      (closeEvent)="onCloseFileViewer()">

    </emp-land-file-viewer>

  </div>


  <div *ngIf="displayTransactionTabbedView"
    class="secondary"
    [fxHide]="secondaryEditorDisplayed"
    [fxHide.lt-lg]="secondaryEditorDisplayed || displayFileViewer">

    <emp-land-transaction-tabbed-view
        [transaction]="selectedTransaction"
        (closeEvent)="onCloseTransactionEditor()">
    </emp-land-transaction-tabbed-view>

  </div>


  <div *ngIf="displayRecordableSubjectTabbedView"
    class="secondary">

    <emp-land-recordable-subject-tabbed-view
      [instrumentRecording]="selectedRecordableSubject.instrumentRecording"
      [recordingAct]="selectedRecordableSubject.recordingAct"
      (recordableSubjectTabbedViewEvent)="onRecordableSubjectTabbedViewEvent($event)">

    </emp-land-recordable-subject-tabbed-view>

  </div>


  <div *ngIf="displayRecordingActEditor"
    class="secondary">

    <emp-land-recording-act-edition
      [instrumentRecordingUID]="selectedRecordingAct.instrumentRecording.uid"
      [recordingActUID]="selectedRecordingAct.recordingAct.uid"
      (closeEvent)="unselectCurrentRecordingAct()"
      (recordingActUpdated)="onRecordingActUpdated()">

    </emp-land-recording-act-edition>

  </div>

</div>


<emp-ng-modal-window *ngIf="displayOptionModalSelected"
                     [config]="{width:'920px'}">

  <ng-container [ngSwitch]="displayOptionModalSelected">

    <emp-land-transaction-creator *ngSwitchCase="'CreateTransactionEditor'"
      (closeEvent)="onOptionModalClosed()">

    </emp-land-transaction-creator>

    <emp-land-workflow-commander *ngSwitchDefault
      [transactionList]="displayOptionModalSelected === 'ReceiveTransactions' ? [] : selectedTransactions"
      [canEditList]="displayOptionModalSelected !== 'ExecuteCommand'"
      (closeEvent)="onOptionModalClosed()">

    </emp-land-workflow-commander>

  </ng-container>

</emp-ng-modal-window>
