<form [formGroup]="form" fxLayout="column" autocomplete="off" class="form-section">

  <mat-divider class="divider-padding">

  </mat-divider>

  <div fxLayout="column" fxLayout.lt-md="column" fxLayoutGap="0.75rem" fxLayoutGap.lt-md="0">
    <div fxLayout="row" fxLayout.lt-md="column">
      <div fxFlex="100">
        <label>{{ isPerson ? 'Nombre Completo:' : 'Nombre o razón social' }}</label>
        <input formControlName='fullName'
          type="text"
          class="text-box uppercase"
          [class.invalid-control]="fullName.touched && fullName.errors">
      </div>
    </div>

    <div fxLayout="row" fxLayout.lt-md="column">
      <div *ngIf="isPerson" fxFlex="50">
        <label>CURP:</label>
        <input formControlName='curp'
          type="text"
          class="text-box uppercase">
      </div>

      <div fxFlex="50">
        <label>RFC:</label>
        <input formControlName='rfc'
          type="text"
          class="text-box uppercase">
      </div>
    </div>

    <div fxLayout="row" fxLayout.lt-md="column">
      <div fxFlex="100">
        <label>Otra información:</label>
        <textarea formControlName="partyNotes"
          class="text-area uppercase" empNgTextareaAutoresize rows="1">

        </textarea>
      </div>
    </div>

    <div fxLayout="row" fxLayout.lt-md="column">
      <div fxFlex="40">
        <label>Participa como:</label>
        <emp-ng-select
          [config]="{groupBy: 'items', clearable: false}"
          [placeholder]="'( Seleccionar rol )'"
          [items]="rolesList"
          [showError]="roleUID.touched && roleUID.errors"
          formControlName="roleUID"
          (changes)="onRoleChanges($event)">
        </emp-ng-select>
      </div>

      <ng-container [ngSwitch]="getRoleTypeSelected()">
        <ng-container *ngSwitchCase="'Primary'">
          <div fxFlex="40">
            <label>Sobre:</label>
            <emp-ng-select
              [items]="partUnits"
              [placeholder]="'( U de M )'"
              [showError]="partUnitUID.touched && partUnitUID.errors"
              formControlName="partUnitUID"
              (changes)="onPartUnitChanges($event)">
            </emp-ng-select>
          </div>

          <div fxFlex="20" *ngIf="validatePartUnitUIDWithAmount(partUnitUID.value)">
            <label>Cantidad:</label>
            <input formControlName="partAmount"
              type="number"
              class="text-box"
              [class.invalid-control]="partAmount.touched && partAmount.errors">
          </div>
        </ng-container>
        <ng-container *ngSwitchCase="'Secondary'">
          <div fxFlex="60">
            <label>Sobre:</label>
            <emp-ng-select
              [config]="{closeOnSelect: false,
                          multiple: true,
                          searchable: false,
                          clearable: false }"
              [placeholder]="'Seleccionar una persona u organización'"
              [items]="partiesInRecordingActList"

              [showError]="associatedWithUID.touched && associatedWithUID.errors"
              formControlName="associatedWithUID">
            </emp-ng-select>
          </div>
        </ng-container>
        <ng-container *ngSwitchDefault>
          <div fxFlex="60" fxLayoutAlign="center end">
            <p style="height: 28px;">Primero Seleccione un rol de la lista de la izquierda</p>
          </div>
        </ng-container>
      </ng-container>
    </div>

    <div fxLayout="row" fxLayout.lt-md="column">
      <div fxFlex="100">
        <label>Observaciones:</label>
        <textarea formControlName="notes"
          class="text-area uppercase" empNgTextareaAutoresize rows="1">

        </textarea>
      </div>
    </div>
  </div>

  <mat-divider class="divider-padding">

  </mat-divider>

  <div fxLayout="row">

    <div fxFlex fxLayoutAlign="end">

      <button
        (click)="submit()"
        [class.btn]="form?.invalid"
        [class.btn-action]="form?.valid">
        Agregar
      </button>

    </div>

  </div>

</form>
