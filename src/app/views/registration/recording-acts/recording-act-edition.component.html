
<emp-ng-card
  title="Editor del acto jurídico"
  [hint]="cardHint"
  (cardClose)="onClose()">

  <div class="card-body-padding" [empNgSpinnerHost]="spinner">

    <emp-ng-spinner #spinner [visible]="isLoading"></emp-ng-spinner>

    <emp-land-recording-act-editor
      [recordingAct]="recordingAct"
      (recordingActEditorEvent)="onRecordingActEditorEvent($event)">

    </emp-land-recording-act-editor>

    <ng-container *ngIf="recordingAct.actions.editableFields.includes('Participants')">

      <br>

      <emp-land-party-list
        [partiesList]="recordingAct.parties"
        (partyListEvent)="onPartyListEvent($event)">

      </emp-land-party-list>

      <emp-ng-expansion-button [panelState]="panelAddState" (panelStateChange)="onPanelEstateChange($event)"
        [config]="{ textButtonOpen: 'Agregar una nueva persona u organización a este acto jurídico',
                    textButtonClose: 'Cancelar registro'}">


        <ng-container *ngIf="panelAddState">

          <emp-land-party-selector
            (partySelectedChange)="onPartySelectedChange($event)">

          </emp-land-party-selector>

          <emp-land-party-editor *ngIf="partySelected && partySelected?.party?.fullName !== ''"
            [partySelected]="partySelected"
            [partUnits]="recordingAct.actions.editionValues.partUnits"
            [primaryPartyRoles]="recordingAct.actions.editionValues.primaryPartyRoles"
            [secondaryPartyRoles]="recordingAct.actions.editionValues.secondaryPartyRoles"
            (partyEditorEvent)="onPartyEditorEvent($event)">

          </emp-land-party-editor>

        </ng-container>

      </emp-ng-expansion-button>

    </ng-container>

  </div>

</emp-ng-card>
